"use strict";var SingularControls={};SingularControls.Module=angular.module("sgControls",["ng"]),function(n,t){n.SgControlsProvider=[function(){var n=this,t;n.translationCache={};t={};n.currentTranslationRequests={};n.currentTranslationResponses={};n.currentTranslationRequestsLength=0;n.addControlWrapper=function(i,r){return t[i]=r,n};n.addTranslationForCurrentRequest=function(t,i){var r,u;r=i.sgTranslation;r||(r=t.html());r&&(u=n.translationCache[r],u?n.currentTranslationResponses[r]={element:t,value:u}:(n.currentTranslationRequests[r]=t,n.currentTranslationRequestsLength++))};n.getTranslationsForCurrentRequest=function(){return n.getTranslationRequestPromise(n.currentTranslationRequests,n.$http)};n.setTranslationRequestPromise=function(t){return n.getTranslationRequestPromise=t,n};n.getTranslationRequestPromise=undefined;n.maxTranslationCacheLength=1e3;n.translationCacheLength=0;n.setMaxTranslationCacheLength=function(t){return n.maxTranslationCacheLength=t<500?500:t,n};n.getTranslations=function(t){var i={},u={},f=0,r=n.$q.defer();return t.forEach(function(t){var r=n.translationCache[t];r?i[t]=r:(u[t]={},f++)}),f>0?n.getTranslationRequestPromise(u,n.$http).success(function(t){t.forEach(function(t){i[t.Key]=t.Value;n.translationCacheLength<n.maxTranslationCacheLength&&(n.translationCache[t.Key]=t.Value,n.translationCacheLength++)});r.resolve(i)}):r.resolve(i),r.promise};n.$q=undefined;n.$http=undefined;n.$get=["$q","$http",function(t,i){return n.$q=t,n.$http=i,n}]}];t.provider("sgControlsConfig",n.SgControlsProvider);n.SgTranslationService=["sgControlsConfigProvider",function(n){var t=this;t.getTranslations=function(t){return n.getTranslations(t)};t.emptyCache=function(){n.translationCache={}};t.$get=[function(){return t}]}];t.provider("sgTranslationService",n.SgTranslationService);t.directive("sgForm",["sgControlsConfig",function(){return{restrict:"E",link:function(n,t,i){var r=n.$eval(i.datasource)}}}]);t.directive("sgTranslation",["sgControlsConfig",function(n){return{restrict:"AEC",requires:"sgTranslationsProcessor",transclude:!1,link:function(t,i,r){n.addTranslationForCurrentRequest(i,r)}}}]);t.directive("sgTranslationsProcessor",["sgControlsConfig",function(n){var t=function(t){var r,i;for(r in n.currentTranslationResponses)i=n.currentTranslationResponses[r],i.element.hasClass("sg-translation")||i.element.toString().toLowerCase()!=="sg-translation"?i.element.html(i.value):(i.element.after(i.value),i.element.remove());n.currentTranslationRequests={};n.currentTranslationRequestsLength=0;n.currentTranslationResponses={};t.remove()};return{restrict:"AEC",transclude:!0,link:function(i,r){n.getTranslationRequestPromise&&n.currentTranslationRequestsLength>0?n.getTranslationsForCurrentRequest().success(function(i){i.forEach(function(t){var i=n.currentTranslationRequests[t.Key];i&&(n.currentTranslationResponses[t.Key]={element:i,value:t.Value},n.translationCacheLength<n.maxTranslationCacheLength&&(n.translationCache[t.Key]=t.Value,n.translationCacheLength++))});t(r)}).error(function(n){console.log("Error getting translation data: "+(n.Message||"Unknown error"))}):t(r)}}}])}(SingularControls,SingularControls.Module);
/*
//# sourceMappingURL=sgcontrols.min.js.map
*/