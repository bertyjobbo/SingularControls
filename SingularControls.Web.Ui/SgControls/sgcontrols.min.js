"use strict";var SingularControls={};SingularControls.Module=angular.module("sgControls",["ng"]),function(n,t){n.SgControlsProvider=function(){var n=this,t;n.translationCache={};t={};n.currentTranslationRequests={};n.currentTranslationResponses={};n.currentTranslationRequestsLength=0;n.addControlWrapper=function(i,r){return t[i]=r,n};n.addTranslationForCurrentRequest=function(t,i){var r=i.sgLangList,u=t.html().toLowerCase(),f=n.getTranslationFromCache(r,u);f?n.currentTranslationResponses[r+":"+u]={element:t,value:f}:(n.currentTranslationRequests[r+":"+u]=t,n.currentTranslationRequestsLength++)};n.http=undefined;n.getTranslationsForCurrentRequest=function(){return n.getTranslationRequestPromise(n.currentTranslationRequests,n.http)};n.setTranslationRequestPromise=function(t){return n.getTranslationRequestPromise=t,n};n.getTranslationRequestPromise=undefined;n.getTranslationFromCache=function(t,i){return n.translationCache[t+":"+i]};n.maxTranslationCacheLength=1e3;n.translationCacheLength=0;n.setMaxTranslationCacheLength=function(t){return n.maxTranslationCacheLength=t<500?500:t,n};n.$get=["$http",function(t){return n.http=t,n}]};t.provider("sgControlsConfig",n.SgControlsProvider);t.directive("sgForm",["sgControlsConfig",function(){return{restrict:"E",link:function(n,t,i){var r=n.$eval(i.datasource)}}}]);t.directive("sgLangAggregator",["sgControlsConfig",function(n){var t=function(){var i,t;for(i in n.currentTranslationResponses)t=n.currentTranslationResponses[i],t.element.after(t.value);n.currentTranslationRequests={};n.currentTranslationRequestsLength=0;n.currentTranslationResponses={}};return{restrict:"E",transclude:!1,link:function(){n.getTranslationRequestPromise&&n.currentTranslationRequestsLength>0?n.getTranslationsForCurrentRequest().success(function(i){i.forEach(function(t){var i=n.currentTranslationRequests[t.ListAndKey];i&&(n.currentTranslationResponses[t.ListAndKey]={element:i,value:t.TranslatedValue},n.translationCacheLength<n.maxTranslationCacheLength&&(n.translationCache[t.ListAndKey]=t.TranslatedValue,n.translationCacheLength++))});t()}).error(function(n){console.log("Error getting translation data: "+(n.Message||"Unknown error"))}):t()}}}]);t.directive("sgLang",["sgControlsConfig",function(n){return{restrict:"E",requires:"sgLangAggregator",transclue:!0,link:function(t,i,r){i.attr("style","display:none");n.addTranslationForCurrentRequest(i,r)}}}])}(SingularControls,SingularControls.Module);
/*
//# sourceMappingURL=sgcontrols.min.js.map
*/