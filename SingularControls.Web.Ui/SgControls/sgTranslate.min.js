"use strict";window.SingularControls==undefined&&(window.SingularControls={});SingularControls.TranslateModule=angular.module("sgTranslate",["ng"]),function(n,t){n.SgTranslateConfigProvider=[function(){var n=this;n.setTranslationRequestPromise=function(t){return n.getTranslationRequestPromise=t,n};n.setMaxTranslationCacheLength=function(t){return n.maxTranslationCacheLength=t<500?500:t,n};n.getTranslationRequestPromise=undefined;n.maxTranslationCacheLength=500;n.$get=[function(){return n}]}];t.provider("sgTranslateConfig",n.SgTranslateConfigProvider);n.SgTranslationFactory=["sgTranslateConfigProvider",function(n){var t={translationCache:{},currentTranslationRequests:{},currentTranslationResponses:{},currentTranslationRequestsLength:0,addTranslationForCurrentRequest:function(n,i){var r,u;r=i.sgTranslation;r||(r=n.html());r||(r=n.attr("sg-translate"));r&&(u=t.translationCache[r],u?t.currentTranslationResponses[r]={element:n,value:u}:(t.currentTranslationRequests[r]=n,t.currentTranslationRequestsLength++))},getTranslationsForCurrentRequest:function(){return n.getTranslationRequestPromise(t.currentTranslationRequests,t.$http)},translationCacheLength:0,getTranslations:function(i){var r={},f={},e=0,u=t.$q.defer();return i.forEach(function(n){var i=t.translationCache[n];i?r[n]=i:(f[n]={},e++)}),e>0?n.getTranslationRequestPromise(f,t.$http).success(function(i){i.forEach(function(i){r[i.Key]=i.Value;t.translationCacheLength<n.maxTranslationCacheLength&&(t.translationCache[i.Key]=i.Value,t.translationCacheLength++)});u.resolve(r)}):u.resolve(r),u.promise},$q:undefined,$http:undefined};this.$get=["$q","$http",function(n,i){return t.$q=n,t.$http=i,t}]}];t.provider("sgTranslationFactory",n.SgTranslationFactory);n.SgTranslationService=[function(){var n={getTranslations:function(t){return n.sgTranslationFactory.getTranslations(t)},emptyCache:function(){n.sgTranslationFactory.translationCache={}},sgTranslationFactory:undefined};this.$get=["sgTranslationFactory",function(t){return n.sgTranslationFactory=t,n}]}];t.provider("sgTranslationService",n.SgTranslationService);t.directive("sgTranslate",["sgTranslationFactory",function(n){return{restrict:"AEC",requires:"sgTranslateProcessor",transclude:!1,link:function(t,i,r){n.addTranslationForCurrentRequest(i,r)}}}]);t.directive("sgTranslateProcessor",["sgTranslateConfig","sgTranslationFactory",function(n,t){var i=function(n){var r,i;for(r in t.currentTranslationResponses)i=t.currentTranslationResponses[r],i.element.hasClass("sg-translation")||i.element.toString().toLowerCase()!=="sg-translation"?i.element.html(i.value):(i.element.after(i.value),i.element.remove());t.currentTranslationRequests={};t.currentTranslationRequestsLength=0;t.currentTranslationResponses={};n.remove()};return{restrict:"AEC",transclude:!0,link:function(r,u){n.getTranslationRequestPromise&&t.currentTranslationRequestsLength>0?t.getTranslationsForCurrentRequest().success(function(r){r.forEach(function(i){var r=t.currentTranslationRequests[i.Key];r&&(t.currentTranslationResponses[i.Key]={element:r,value:i.Value},t.translationCacheLength<n.maxTranslationCacheLength&&(t.translationCache[i.Key]=i.Value,t.translationCacheLength++))});i(u)}).error(function(n){console.log("Error getting translation data: "+(n.Message||"Unknown error"))}):i(u)}}}])}(SingularControls,SingularControls.TranslateModule);
/*
//# sourceMappingURL=sgTranslate.min.js.map
*/