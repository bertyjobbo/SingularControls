"use strict";window.SingularControls==undefined&&(window.SingularControls={});SingularControls.TranslateModule=angular.module("sgTranslate",["ng"]),function(n,t){n.SgTranslateConfigProvider=[function(){var n=this;n.setTranslationRequestPromise=function(t){return n.getTranslationRequestPromise=t,n};n.setMaxTranslationCacheLength=function(t){return n.maxTranslationCacheLength=t<500?500:t,n};n.getTranslationRequestPromise=undefined;n.maxTranslationCacheLength=500;n.$get=[function(){return n}]}];t.provider("sgTranslateConfig",n.SgTranslateConfigProvider);n.SgTranslationFactory=["sgTranslateConfigProvider",function(n){var t={translationCache:{},emptyCache:function(){this.currentTranslationRequests={};this.currentTranslationResponses={};this.currentTranslationRequestsLength=0;this.translationCacheLength=0;this.translationCache={}},currentTranslationRequests:{},currentTranslationResponses:{},currentTranslationRequestsLength:0,addTranslationForCurrentRequest:function(n,i){var r,u=!1,f;i.hasSgTranslateTitle?(r=i.sgTranslateTitle,i.hasSgTranslateTitle=undefined,u=!0):n.hasClass("sg-translate")?r=n.html():n.attr("sg-translate")!==undefined?r=i.sgTranslate:n[0].tagName=="SG-TRANSLATE"&&(r=n.html());r&&(f=t.translationCache[r],f?t.currentTranslationResponses[r]={element:n,value:f,attrs:i,hasSgTranslateTitle:u}:(t.currentTranslationRequests[r]={element:n,attrs:i,hasSgTranslateTitle:u},t.currentTranslationRequestsLength++))},getTranslationsForCurrentRequest:function(){var i=[];for(var r in t.currentTranslationRequests)i.push(r);return n.getTranslationRequestPromise(i)},translationCacheLength:0,getTranslations:function(i){var r={},e={},o=0,u=t.$q.defer(),f,s;if(i.forEach(function(n){var i=t.translationCache[n];i?r[n]=i:(e[n]={},o++)}),o>0&&n.getTranslationRequestPromise!==undefined){f=[];for(s in e)f.push(s);n.getTranslationRequestPromise(f).success(function(i){i.forEach(function(i){r[i.Key]=i.Value;t.translationCacheLength<n.maxTranslationCacheLength&&(t.translationCache[i.Key]=i.Value,t.translationCacheLength++)});u.resolve(r)})}else u.resolve(r);return u.promise},$q:undefined,$http:undefined};this.$get=["$q",function(n){return t.$q=n,t}]}];t.provider("sgTranslationFactory",n.SgTranslationFactory);n.SgTranslationService=[function(){var n={getTranslations:function(t){return n.sgTranslationFactory.getTranslations(t)},emptyCache:function(){n.sgTranslationFactory.emptyCache()},listItemsCache:{},getListItems:function(t,i){var u=t+"$$$"+(i==undefined||i==null||i==""?"":JSON.stringify(i)),f=n.listItemsCache[u],r=n.$q.defer();return f?r.resolve(f):n.$http.post(t,i).success(function(t){n.listItemsCache[u]=t;r.resolve(t)}).error(function(){r.resolve({})}),r},sgTranslationFactory:undefined};this.$get=["sgTranslationFactory","$q","$http",function(t,i,r){return n.sgTranslationFactory=t,n.$q=i,n.$http=r,n}]}];t.provider("sgTranslationService",n.SgTranslationService);t.directive("sgTranslate",["sgTranslationFactory",function(n){return{restrict:"AEC",requires:"sgTranslateProcessor",transclude:!1,link:function(t,i,r){n.addTranslationForCurrentRequest(i,r)}}}]);t.directive("sgTranslateTitle",["sgTranslationFactory",function(n){return{restrict:"A",requires:"sgTranslateProcessor",transclude:!1,link:function(t,i,r){r.hasSgTranslateTitle=!0;n.addTranslationForCurrentRequest(i,r)}}}]);t.directive("sgTranslateProcessor",["sgTranslateConfig","sgTranslationFactory",function(n,t){var i=function(n){var r,i;for(r in t.currentTranslationResponses)i=t.currentTranslationResponses[r],i.hasSgTranslateTitle?(i.element.attr("title",i.value),i.element.removeAttr("sg-translate-title")):i.element.hasClass("sg-translate")||i.element.attr("sg-translate")!==undefined?i.element.html(i.value):i.element[0].tagName=="SG-TRANSLATE"&&(i.element.after(i.value),i.element.remove());t.currentTranslationRequests={};t.currentTranslationRequestsLength=0;t.currentTranslationResponses={};n.remove()};return{restrict:"AEC",transclude:!0,link:function(r,u){n.getTranslationRequestPromise&&t.currentTranslationRequestsLength>0?t.getTranslationsForCurrentRequest().success(function(r){r.forEach(function(i){var r=t.currentTranslationRequests[i.Key];r&&(t.currentTranslationResponses[i.Key]={element:r.element,value:i.Value,attrs:r.attrs,hasSgTranslateTitle:r.hasSgTranslateTitle},t.translationCacheLength<n.maxTranslationCacheLength&&(t.translationCache[i.Key]=i.Value,t.translationCacheLength++))});i(u)}).error(function(n){console.log("Error getting translation data: "+(n.Message||"Unknown error"))}):i(u)}}}])}(SingularControls,SingularControls.TranslateModule);
/*
//# sourceMappingURL=sgTranslate.min.js.map
*/