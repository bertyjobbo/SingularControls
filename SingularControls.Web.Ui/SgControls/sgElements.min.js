"use strict";if(!SgControls)var SgControls={};SgControls.ElementsModule=angular.module("sgElements",["ng"]),function(n,t){t.SgNavDirective=["$compile","$rootScope",function(n,t){return{restrict:"A",link:function(i,r){var u,f,s,e,h,o,c;t.$on("$routeChangeSuccess",function(){i.sgnavopen=!1});u=r[0];switch(u.tagName){case"NAV":r.attr("role","navigation");r.attr("ng-class","{ hidden: !sgnavopen, showing: sgnavopen }");r.removeAttr("sg-nav");var l=u.getElementsByTagName("BUTTON"),a=u.getElementsByTagName("A"),v=u.querySelectorAll("input[type=submit]");for(f=0;f<l.length;f++)s=angular.element(l[f]),s.attr("ng-click","sgnavopen=false;"+s.attr("ng-click"));for(e=0;e<a.length;e++)h=angular.element(a[e]),h.attr("ng-click","sgnavopen=false;"+h.attr("ng-click"));for(o=0;o<v.length;o++)c=angular.element(v[o]),c.attr("ng-click","sgnavopen=false;"+c.attr("ng-click"));n(r)(i);break;case"BUTTON":r.attr("type","button");r.attr("role","menubar");r.html()==""&&r.html("-<br />-<br />-");r.attr("ng-click","sgnavopen = !sgnavopen;");r.attr("ng-init","sgnavopen=false;");r.removeAttr("sg-nav");n(r)(i);break;case"A":r.attr("ng-click","sgnavopen=false;"+r.attr("ng-click"));r.removeAttr("sg-nav");n(r)(i)}}}}];n.directive("sgNav",t.SgNavDirective);t.SgLoaderConfigProvider=[function(){var n=this;n.doOnRouteChange=!1;n.doOnSgRouteChange=!1;n.doFade=!1;n.doFadeTiming=0;n.onBeforeShowMethod=undefined;n.onBeforeHideMethod=undefined;n.showClassName=undefined;n.hideClassName=undefined;n.onRouteChange=function(){return n.doOnRouteChange=!0,n};n.onSgRouteChange=function(){return n.doOnSgRouteChange=!0,n};n.showClass=function(t){return n.showClassName=t,n};n.hideClass=function(t){return n.hideClassName=t,n};n.onBeforeShow=function(t){return n.onBeforeShowMethod=t,n};n.onBeforeHide=function(t){return n.onBeforeHideMethod=t,n};n.$get=[function(){return n}]}];n.provider("sgLoaderConfig",t.SgLoaderConfigProvider);t.SgLoaderDirective=["sgLoaderConfig","$rootScope",function(n,t){return{restrict:"AC",controller:["$scope",function(){if(t.sgShowLoaderSet)throw"You can only use sgLoader on a single element";else t.sgShowLoaderFlag=!0,t.$on("sgLoaderShow",function(){t.sgShowLoaderFlag=!0}),t.$on("sgLoaderHide",function(){t.sgShowLoaderFlag=!1}),n.doOnRouteChange&&(t.$on("$routeChangeStart",function(){t.sgShowLoaderFlag=!0}),t.$on("$routeChangeSuccess",function(){t.sgShowLoaderFlag=!1})),n.doOnSgRouteChange&&(t.sgLoaderOnSgRouteChange=!0),t.sgShowLoaderSet=!0}],link:function(i,r){t.$watch(function(){return t.sgShowLoaderFlag},function(t){if(t)if(n.onBeforeShowMethod!==undefined)n.onBeforeShowMethod(function(){r.addClass(n.showClassName);r.removeClass(n.hideClassName)});else r.addClass(n.showClassName),r.removeClass(n.hideClassName);else if(n.onBeforeHideMethod!==undefined)n.onBeforeHideMethod(function(){r.addClass(n.hideClassName);r.removeClass(n.showClassName)});else r.addClass(n.hideClassName),r.removeClass(n.showClassName)},!0)}}}];n.directive("sgLoader",t.SgLoaderDirective);t.SgTitleDirective=["$rootScope",function(n){return{restrict:"AEC",link:function(t,i,r){switch(i[0].tagName){case"TITLE":n.sgTitleElement=i;n.sgTitleElementPrefix=r.sgTitle.replace(/\[WHITESPACE\]/g," ");i.removeAttr("sg-title");break;case"SG-TITLE":n.sgTitleElement.html(n.sgTitleElementPrefix+i.html());i.remove()}}}}];n.directive("sgTitle",t.SgTitleDirective);t.SgDescriptionDirective=["$rootScope",function(n){return{restrict:"AEC",link:function(t,i){switch(i[0].tagName){case"META":i.attr("name","description");n.sgDescriptionElement=i;i.removeAttr("sg-description");break;default:n.sgDescriptionElement.attr("content",i.html());i.remove()}}}}];n.directive("sgDescription",t.SgDescriptionDirective);n.directive("sgFocusWhen",function(){return{restrict:"A",link:function(n,t,i){n.$watch(function(){return n.$eval(i.sgFocusWhen)},function(n){console.log(n);n&&t[0].focus()},!0)}}});n.directive("sgAlert",["$rootScope","$timeout",function(n,t){return{restrict:"A",link:function(i,r,u){if(u.sgAlert){var f=u.sgAlert.split("|");n.$on("sgAlert-"+f[0],function(n,i){r.html(i);r.removeClass(f[2]);r.addClass(f[1]);t(function(){r.removeClass(f[1]);r.addClass(f[2])},f[3])})}}}}]);n.directive("sgFileUpload",[function(){return{restrict:"A",scope:{sgModel:"="},link:function(n,t,i){var r=!1;t.attr("type","file");i.sgFileUpload=="multiple"&&(t.attr("multiple","multiple"),r=!0);t.bind("change",function(){n.$apply(function(){var i,s=t[0],f=s.files,u,e,o;if(r)for(i=[],u=0;u<f.length;u++)e=f[u],i.push(e);else o=f[0],i=o;n.sgModel=i})})}}}]);n.directive("sgFileUploader",["$compile","$http","$timeout",function(n,t,i){return{restrict:"E",requires:"sgFileUpload",controller:["$scope",function(n){n.sgFileUploaderPostData=[];n.sgFileUploaderBeforeSubmitCallback=function(){console.log("sgFileUploaderBeforeSubmitCallback")};n.sgFileUploaderOnSubmit=function(){n.sgFileUploaderBeforeSubmitCallback(n.sgFileUploaderPostData);var i=n.sgFileUploaderPostData.map(function(n){return n==null?undefined:n.file}),u=n.sgFileUploaderPostData.map(function(n){return{Name:n.name,Description:n.description,IsEdit:n.isEdit,FileId:n.fileId}}),f=i.map(function(n){return n==null?0:n.size}),r=n.$parent.$eval(n.attrs_otherPostData),e=r?r():{};t({method:"POST",url:n.sgFileUploaderConfig.postUrl,headers:{"Content-Type":undefined},transformRequest:function(t){var i=new FormData,r,u,f;for(i.append("Data",JSON.stringify(t.Data)),i.append("CustomData",JSON.stringify(t.CustomData)),i.append("Sizes",JSON.stringify(t.Sizes)),r=0;r<t.Files.length;r++)if(u=t.Files[r],n.sgFileUploaderConfig.isMulti)for(f=0;f<u.length;f++)i.append("file"+r,u[f]);else i.append("file"+r,u);return i},data:{Data:u,Files:i,CustomData:e,Sizes:f}}).success(function(t){n.sgFileUploaderIsEdit=!1;n.sgFileUploaderOnSubmitCallback(!0,t);n.sgFileUploaderPostData=[]}).error(function(t){n.sgFileUploaderOnSubmitCallback(!1,t)})};n.sgFileUploaderOnSubmitCallback=function(n,t){console.log(n);console.log(t)};n.sgFileUploaderSetConfig=function(){if(n.sgFileUploaderConfig={maxRows:n.attrs_maxRows==""||n.attrs_maxRows==undefined?999999:parseInt(n.attrs_maxRows),hasName:n.attrs_hasName=="true",hasDescription:n.attrs_hasDescription=="true",isMulti:n.attrs_isMulti=="true",postUrl:n.attrs_postUrl,addText:n.attrs_addText==undefined||n.attrs_addText==""?"Add row":n.attrs_addText,submitText:n.attrs_submitText==undefined||n.attrs_submitText==""?"Upload":n.attrs_submitText,noFilesText:n.attrs_noFilesText==undefined||n.attrs_noFilesText==""?"No files added yet":n.attrs_noFilesText,nameLabelText:n.attrs_nameLabelText==undefined||n.attrs_nameLabelText==""?"Name":n.attrs_nameLabelText,descriptionLabelText:n.attrs_descriptionLabelText==undefined||n.attrs_descriptionLabelText==""?"Description":n.attrs_descriptionLabelText,fileLabelText:n.attrs_fileLabelText==undefined||n.attrs_fileLabelText==""?"File":n.attrs_fileLabelText,useBootstrap:n.attrs_useBootstrap=="true",removeText:n.attrs_removeText==undefined||n.attrs_removeText==""?"Remove this file":n.attrs_removeText,copyText:n.attrs_copyText==undefined||n.attrs_copyText==""?"Copy file name":n.attrs_copyText,sgSpellcheck:n.attrs_sgSpellcheck=="true"},n.attrs_submitCallback!=undefined&&n.attrs_submitCallback!=""&&(n.sgFileUploaderOnSubmitCallback=n.$parent.$eval(n.attrs_submitCallback)),n.attrs_beforeSubmit!=undefined&&n.attrs_beforeSubmit!=""&&(n.sgFileUploaderBeforeSubmitCallback=n.$parent.$eval(n.attrs_beforeSubmit)),n.$parent.$on("sgFileUploaderPush",function(t,i){n.sgFileUploaderPostData.push(i)}),n.$parent.$on("sgFileUploaderClear",function(){n.sgFileUploaderPostData=[]}),n.$parent.$on("sgFileUploaderGet",function(t,i){i(n.sgFileUploaderPostData)}),n.$parent.$on("sgFileUploaderEdit",function(t,i){if(n.sgFileUploaderIsEdit=!0,i.isEdit=!0,n.sgFileUploaderPostData=[i],!i.fileId)throw"When calling $scope.$on('sgFileUploaderEdit',fileObj) the fileObj must have the property fileId set";}),n.$parent.$on("sgFileUploaderGoToTop",function(){n.sgFileUploaderIsEdit=!0;i(function(){n.sgFileUploaderIsEdit=!1},100)}),(n.sgFileUploaderConfig.hasName||n.sgFileUploaderConfig.hasDescription)&&n.sgFileUploaderConfig.isMulti)throw"sg-file-uploader is-multi attribute can only be true if has-name and has-description are both unused, undefined, 'false', or an empty string";};n.sgFileUploaderAddRow=function(){n.sgFileUploaderIsEdit||n.sgFileUploaderPostData.length<n.sgFileUploaderConfig.maxRows&&n.sgFileUploaderPostData.push({})};n.sgFileUploaderRemoveRow=function(t){n.sgFileUploaderIsEdit=!1;n.sgFileUploaderPostData.splice(t,1)};n.copyText=function(t){var i=n.sgFileUploaderPostData[t];i&&i.file&&(i.name=i.file.name)};n.getRequiredText=function(n){return n?"":"required"}}],scope:{attrs_maxRows:"@maxRows",attrs_hasName:"@hasName",attrs_hasDescription:"@hasDescription",attrs_isMulti:"@isMulti",attrs_postUrl:"@postUrl",attrs_sgSubmit:"@sgSubmit",attrs_addText:"@addText",attrs_submitText:"@submitText",attrs_noFilesText:"@noFilesText",attrs_useBootstrap:"@useBootstrap",attrs_nameLabelText:"@nameLabelText",attrs_descriptionLabelText:"@descriptionLabelText",attrs_fileLabelText:"@fileLabelText",attrs_removeText:"@removeText",attrs_submitCallback:"@submitCallback",attrs_otherPostData:"@otherPostData",attrs_beforeSubmit:"@beforeSubmit",attrs_copyText:"@copyText",attrs_sgSpellcheck:"@sgSpellcheck"},link:function(t,i){var r,u,f;t.sgFileUploaderSetConfig();r=t.sgFileUploaderConfig;u="<input style='height: 0sg; padding: 0;margin:0;border:none;' sg-focus-when='sgFileUploaderIsEdit' /><form class='sg-file-uploader sg-border-radius"+(r.useBootstrap?" bootstrap":" no-bootstrap")+"' ng-submit='sgFileUploaderOnSubmit()'>";u+="<div class='sg-file-uploader-rows'>";u+="<div ng-repeat='row in sgFileUploaderPostData' class='sg-file-uploader-row'>";r.useBootstrap&&(u+="<div ng-show='!row.isEdit' class='form-group'>");(r.hasName||r.hasDescription)&&(u+="<label for='sgFile{{$index}}'>"+r.fileLabelText+"<\/label>");u+="<input ng-required=\"row.isEdit ? '':'required'\" id='sgFile{{$index}}' sg-model='row.file' sg-file-upload"+(r.isMulti?"='multiple'":"")+" class='sg-file-upload sg-file-upload-hasname-"+(r.hasName?"true":"false")+(r.useBootstrap?" form-control":"")+"' />";r.useBootstrap&&(u+="<\/div>");r.hasName&&(r.useBootstrap&&(u+="<div class='form-group'>"),u+="<label for='sgName{{$index}}'>"+r.nameLabelText+"<\/label><a href='' ng-show='row.file != undefined' class='sg-file-uploader-copyfilename' ng-click='copyText($index)'>("+r.copyText+")<\/a>",u+="<span class='sg-file-upload-name'><input "+(r.sgSpellcheck?'spellcheck="true"':"")+" required id='sgName{{$index}}' ng-model='row.name' type='text'"+(r.useBootstrap?" class='form-control'":"")+" /><\/span>",r.useBootstrap&&(u+="<\/div>"));r.hasDescription&&(r.useBootstrap&&(u+="<div class='form-group'>"),u+="<label for='sgDescription{{$index}}'>"+r.descriptionLabelText+"<\/label>",u+="<span class='sg-file-upload-description'><textarea "+(r.sgSpellcheck?'spellcheck="true"':"")+" required rows='4' id='sgDescription{{$index}}' ng-model='row.description'"+(r.useBootstrap?" class='form-control'":"")+"><\/textarea><\/span>",r.useBootstrap&&(u+="<\/div>"));u+="<div class='sg-file-uploader-row-removecontainer'>";u+="<a href='' class='sg-file-uploader-row-remove"+(r.useBootstrap?"":"")+"' ng-click='sgFileUploaderRemoveRow($index)'>"+r.removeText+"<\/a>";u+="<\/div>";u+="<\/div><\/div>";u+="<div class='sg-file-uploader-nofile sg-border-radius' ng-show='sgFileUploaderPostData.length < 1'>"+r.noFilesText+"<\/div>";u+="<div class='sg-file-uploader-buttons'>";u+="<button ng-disabled='sgFileUploaderPostData.length < 1' type='submit' class='sg-file-uploader-submit"+(r.useBootstrap?" btn btn-info":"")+"'>"+r.submitText+"<\/button>";u+="<button ng-hide='sgFileUploaderIsEdit || sgFileUploaderPostData.length >= sgFileUploaderConfig.maxRows' ng-click='sgFileUploaderAddRow()' type='button' class='sg-file-uploader-add"+(r.useBootstrap?" btn":"")+"'>"+r.addText+"<\/button>";u+="<\/div>";u+="<p class='sg-signature'>sgFile: sg-file-uploader &copy; 2014<\/p><\/form>";f=n(u)(t);i.after(f);i.remove()}}}])}(SgControls.ElementsModule,SgControls);
/*
//# sourceMappingURL=sgElements.min.js.map
*/